## インストール

1. ストラクチャファイルと同階層に``Components``フォルダーを用意してください。

1. フォルダー内にコンポーネントのストラクチャファイル，つまり``annotation.4dbase``パッケージ，または``annotation.4DB`` / ``annotation.4DC`` と ``annotation.4DIndy``のペア）をコピーしてください。ショートカット（Windows）またはエイリアス（macOS）を使用することもできます。

1. ストラクチャをデザインモードで開き，エクスプローラーの「メソッド > コンポーネントメソッド」リストに「annotation」が表示されれば，インストールは成功です。

<img src="https://user-images.githubusercontent.com/1725068/28804621-61663c2a-769f-11e7-8657-2ce3c8d73bd1.png" width="292px" />

4. フォームに「サブフォーム」タイプのオブジェクトを配置します。オブジェクトのプロパティは下記のように設定してください。

* 出力サブフォーム: ``False``
* 詳細フォーム: ``Editor (annotation)``
* フォーカス可: ``True`` 

その他のプロパティは自由に設定することができます。

フォームのプロパティは下記のように設定してください。

* 最小幅: ``600``以上
* 最小高さ: ``200``以上
* イベント: ``On Load``, ``On Unload``, ``On Resize``, ``On Outside Call``

その他のプロパティは自由に設定することができます。

5. サブフォームのオブジェクト名は，エディターの固有識別名として，後述する公開メソッドに渡されることになります。以下の説明では``Editor``というオブジェクト名を使用しています。

6. オブジェクトメソッドに下記の1行を追加します。

```
$event:=NEditor_Form_event ("Editor")
```

7. フォームメソッドに下記の1行を追加します。

```
$event:=NEditor_Form_event ("Editor")
```

8. フォームを実行すると，早速，エディターを使用することができます。

詳細は下記のドキュメントをご覧ください。

[デザインリファレンス > 4Dコンポーネントの開発とインストール > 
コンポーネントのインストールと互換性](http://doc.4d.com/4Dv16/4D/16/Component-installation-and-compatibility.300-3048906.ja.html)

## エディターの基本操作

エディターを起動した直後は，自由線ツールが選択されています。

四角・テキスト・円・線ツールを使用した後は，描画した新しいオブジェクトが選択された状態になり，続けて移動やリサイズをすることができます。

線・自由線ツールを使用した後は，選択ツールに切り替わらず，同種のオブジェクトを続けて描画することができます。

**カスタマイズ**: 最初に選択されているツールは，変更することができます。ソースコード内の``NEditor_SET_TOOL``を参照してください。

### 選択ツール

範囲指定でオブジェクトを選択します。また，選択されたオブジェクト群を移動またはリサイズすることができます。

**注記**: 透明度が``10%``に満たないオブジェクトをクリック操作で選択することはできません。たとえば，塗りカラーが「透過」に設定されている場合，描画ラインをクリックする必要があります。描画カラーも「透過」に設定されている場合，範囲指定でオブジェクトを選択する必要があります。

選択中のオブジェクトは，キーボード操作で移動またはリサイズすることもできます。

* 矢印キー: 上下左右に移動
* ``shift``+矢印キー: 上下左右にステップで移動（デフォルトは``10``ポイント）
* ``control (command)``+矢印キー: 上下左右にリサイズ
* ``control (command)``+``shift``+矢印キー: 上下左右にステップでリサイズ（デフォルトは``10``ポイント）

**カスタマイズ**:  ステップの単位は変更することができます。ソースコード内の``Editor_SET_STEP_X``, ``Editor_SET_STEP_Y``を参照してください。

通常，オブジェクトが選択された状態で別のオブジェクトをクリックすると，以前に選択されていたオブジェクトは選択が解除されます。``shift``キーを押しながらオブジェクトを続けてクリックすることにより，複数のオブジェクトを同時に選択することができます。

オブジェクトは，キーボード操作で選択することもできます。

* ``control (command)``+``A``: すべてを選択

---
